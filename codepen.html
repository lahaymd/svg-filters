<!DOCTYPE html>
<html lang="en" ng-app='svgImageTest'>
<head>
	<meta charset="UTF-8">
	<title>Document</title>
	<script src="https://ajax.googleapis.com/ajax/libs/angularjs/1.5.6/angular.min.js"></script>
	<style type="text/css">
		img {
			width: 500px;
			height: 300px;
		}
		.flex {
			display: flex;
		}

		.my-scale {
			animation: scaleMe 5s ease-in alternate infinite;
		}

		#hover {
			animation: translateMe 5s ease-in alternate infinite;
			
		}

		.fade {
			animation: 2s fadeMe 5s ease-in alternate infinite;
			
		}
			.fade10 {
			animation: 2s fadeMe 10s ease-in alternate infinite;
			
		}

		@keyframes scaleMe {
			0% {transform: scale(1)}
			100% {transform: scale(2)}
		}
		@keyframes translateMe {
			0% {transform: translate(0)}
			100% {transform: translate(500px)}
		}
		@keyframes fadeMe {
			0% {opacity: 0;}
			100% {opacity: 1;}
		}

		.svg-1:hover path {
  d: path("M8,2 L2,8 L8,3");
}
.svg-2:hover path {
  d: path("M2,2 L5,8 L8,2");
}

svg polyline,
svg line,
svg path {
  fill: none;
  stroke: #000;
  stroke-linecap: round;
  stroke-linejoin: round;
  transition: 2s;
}

.container {
	width : 50px
}

	</style>
</head>

<body>
	<!-- <svg width='300' height='300' viewBox="0 0 10 10" class="svg-1">
  <path d="M2,2 L8,8 L5,2" />
</svg> -->
<div class="container">
	
<svg viewBox="0 0 10 10" class="svg-2">
  <path d="M2,8 L5,2 L8,8" />
</svg>
</div>
	  <div ng-controller="SvgImageCtrl" class="controller">
    <h1>Without empty xlink-href</h1>
    <svg width="383" height="108">
      <image ng-href="{{ href }}" width="383" height="108" />
    </svg>
    <p>{{ href }}</p>
  </div>
  <div ng-controller="SvgImageCtrl" class="controller">
    <h1>With empty xlink-href</h1>
    <svg width="383" height="108">
      <image ng-href="{{ href }}" xlink:href="" width="383" height="108" />
    </svg>
    <p>{{ href }}</p>
	<img src="{{foo}}">

	<input type="text" name="model" ng-model='href'>
	<p>source= {{href}}</p>



	<svg width=0 height=0>
		<defs>

			<linearGradient id='myGradient'>
				<stop offset="0%"  stop-color="lime"/>
           		<stop offset="50%" stop-color="white"/>
           		<stop offset="75%" stop-color="black"/>
           		<stop offset="100%" stop-color="red"/>
			</linearGradient>

			<pattern patternUnits="userSpaceOnUse" id='pattern' x='0' y='0' width='50' height='30'>
				
		<image  xlink:href='download.jpeg'  width='50' height='30' filter='url(#son-of-jake)' mask='url(#mask6)' />	

			</pattern>	

			<filter id='son-of-sam' color-interpolation-filters="sRGB">

				<feComponentTransfer>
					<feFuncR type='discrete' tableValues='1 1'/>
					<feFuncG type='discrete' tableValues='0 1'/>
					<feFuncB type='discrete' tableValues='0 0'/>
				</feComponentTransfer>	
          
                <feColorMatrix  type="hueRotate" values="180" />

				<feComponentTransfer>
					<feFuncR type='discrete' tableValues='1 0'/>
					<feFuncG type='discrete' tableValues='0 0'/>
					<feFuncB type='discrete' tableValues='0 0'/>
				</feComponentTransfer>

				<feColorMatrix type='matrix' 
					values='1 0 0 0 0
	                       	-1 1 0 0 0 
	                        0 0 1 0 0
	                        0 0 0 1 0'/>

			</filter>

			<filter id='son-of-jake' color-interpolation-filters="sRGB">

				<feComponentTransfer>
					<feFuncR type='discrete' tableValues='1 1'/>
					<feFuncG type='discrete' tableValues='0 1'/>
					<feFuncB type='discrete' tableValues='0 0'/>
				</feComponentTransfer>	
          
                <feColorMatrix  type="hueRotate" values="180" />

				<feComponentTransfer>
					<feFuncR type='discrete' tableValues='0 1'/>
					<feFuncG type='discrete' tableValues='0 1'/>
					<feFuncB type='discrete' tableValues='0 1'/>
				</feComponentTransfer>


			</filter>	
			
			<filter id='son-of-jake-blue' color-interpolation-filters="sRGB">

				<feComponentTransfer>
					<feFuncR type='discrete' tableValues='0 1 '/>
					<feFuncG type='discrete' tableValues='0 0'/>
					<feFuncB type='discrete' tableValues='1 1'/>
				</feComponentTransfer>	

			</filter>			

			<filter id='son-of-jake-green' color-interpolation-filters="sRGB">

				<feComponentTransfer>
					<feFuncR type='discrete' tableValues='0 1'/>
					<feFuncG type='discrete' tableValues='1 1'/>
					<feFuncB type='discrete' tableValues='0 0'/>
				</feComponentTransfer>	
          
                <feColorMatrix  type="hueRotate" values="340" />

				<feComponentTransfer>
					<feFuncR type='discrete' tableValues='0 1'/>
					<feFuncG type='discrete' tableValues='1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 0 0 0'/>
					<feFuncB type='discrete' tableValues='0 1 1 1 1 1 1 1 1 1 1 1 1 1'/>
				</feComponentTransfer>

			</filter>			

			<filter id='son-of-jake-inverted' color-interpolation-filters="sRGB">

				<feComponentTransfer>
					<feFuncR type='discrete' tableValues='1 1'/>
					<feFuncG type='discrete' tableValues='0 1'/>
					<feFuncB type='discrete' tableValues='0 0'/>
				</feComponentTransfer>	
          
                <feColorMatrix  type="hueRotate" values="180" />

				<feComponentTransfer>
					<feFuncR type='discrete' tableValues='1 0'/>
					<feFuncG type='discrete' tableValues='1 0'/>
					<feFuncB type='discrete' tableValues='1 0'/>
				</feComponentTransfer>
			</filter>

			<filter id='deicide' color-interpolation-filters="sRGB">
				<feComponentTransfer>
					<feFuncR type='discrete' tableValues='1 1'/>
					<feFuncG type='discrete' tableValues='0 1'/>
					<feFuncB type='discrete' tableValues='0 0'/>
				</feComponentTransfer>	

                <feColorMatrix  type="hueRotate" values="180" />  

				<feComponentTransfer>
					<feFuncR type='discrete' tableValues='1 0'/>
					<feFuncG type='discrete' tableValues='0 0'/>
					<feFuncB type='discrete' tableValues='0 0'/>
				</feComponentTransfer>

				<feColorMatrix  type="matrix" 
				   values="-1 0 0 0 1 
                   0 -1 0 0 0 
                   0 0 -1 0 0
                   0 0 0 1 0"/>

			</filter>
			<symbol id='my-symbol'>
				
		<image xlink:href='{{foo}}' style="width:500; height:300;" filter='url(#son-of-jake)' />
			</symbol>	

			<symbol id='my-symbol2'>
				
		<image xlink:href='Amelia.jpg' style="width:500; height:300;" mask='url(#son-of-jake)' />
			</symbol>

			<mask id="mask1">
				<rect width=500 height=300 fill='black'/>
				<circle cx=250 cy=150 r=100 fill='white'/>
			</mask>	

			<mask id="mask2">
		<image xlink:href='Amelia.jpg' style="width:500; height:300;" filter='url(#deicide)' />
				<!-- <rect width=500 height=300 fill='url(deicide)'/> -->
				<!-- <circle cx=250 cy=150 r=100 fill='white'/> -->
			</mask>

			<mask id="mask3">
		<image xlink:href='Amelia.jpg' style="width:500; height:300;" filter='url(#son-of-sam)' />
				<!-- <rect width=500 height=300 fill='url(deicide)'/> -->
				<!-- <circle cx=250 cy=150 r=100 fill='white'/> -->
			</mask>			


			<mask id="mask4">
		<image xlink:href='Amelia.jpg' style="width:500; height:300;" filter='url(#son-of-jake)'  />
				<!-- <rect width=500 height=300 fill='url(deicide)'/> -->
				<!-- <circle cx=250 cy=150 r=100 fill='white'/> -->
			</mask>	

			<mask id="mask5">
		<image class='my-scale' xlink:href='Amelia.jpg' style="width:500; height:300;" filter='url(#son-of-jake-inverted)'  />
				<!-- <rect width=500 height=300 fill='url(deicide)'/> -->
				<!-- <circle cx=250 cy=150 r=100 fill='white'/> -->
			</mask>

				<mask id="mask6">
		<image class='my-scale' xlink:href='download.jpeg' width='50' height='30' filter='url(#son-of-jake-inverted)'  />
				<!-- <rect width=500 height=300 fill='url(deicide)'/> -->
				<!-- <circle cx=250 cy=150 r=100 fill='white'/> -->
			</mask>
				<mask id="mask7">
		<image  xlink:href='Amelia.jpg' style="width:500; height:300;" filter='url(#son-of-jake-inverted)'  />
				<!-- <rect width=500 height=300 fill='url(deicide)'/> -->
				<!-- <circle cx=250 cy=150 r=100 fill='white'/> -->
			</mask>			
			<mask id="mask8">
		<image  xlink:href='https://encrypted-tbn0.gstatic.com/images?q=tbn:ANd9GcSAy37Nu5guD8uAEGM6w52KJIZHV_WxJM5HznnWZt3-4emSuhOX6w' style="width:500; height:300;" filter='url(#son-of-jake)'  />
				<!-- <rect width=500 height=300 fill='url(deicide)'/> -->
				<!-- <circle cx=250 cy=150 r=100 fill='white'/> -->
			</mask>			
			<mask id="mask9">
		<image  xlink:href='https://encrypted-tbn0.gstatic.com/images?q=tbn:ANd9GcSAy37Nu5guD8uAEGM6w52KJIZHV_WxJM5HznnWZt3-4emSuhOX6w' style="width:500; height:300;" filter='url(#son-of-jake-inverted)'  />
				<!-- <rect width=500 height=300 fill='url(deicide)'/> -->
				<!-- <circle cx=250 cy=150 r=100 fill='white'/> -->
			</mask>			

			<mask id="mask8.5">
		<!-- <image  xlink:href='Amelia.jpg' style="width:500; height:300;" filter='url(#son-of-jake-inverted)'  /> -->
				<rect width=500 height=300 />
				<circle cx=250 cy=150 r=100 fill='white'/>
				<circle cx=350 cy=150 r=100 fill='url(#myGradient)' filter='url(#son-of-jake-inverted)'/>
			</mask>			

			<mask id="mask9">
		<image class='translateMe'  xlink:href='Amelia.jpg' style="width:500; height:300;" filter='url(#son-of-jake-green)'/>
		<image class='translateMe'  xlink:href='Amelia.jpg' style="width:500; height:300;" filter='url(#son-of-jake)'  />
		<!-- <image  xlink:href='Amelia.jpg' style="width:500; height:300;" filter='url(#son-of-jake-inverted)'  /> -->
				<!-- <rect width=500 height=300 fill='url(deicide)'/> -->
				<circle cx=350 cy=150 r=100 fill='white'/>
			</mask>
		<image id='my-use' xlink:href='Amelia.jpg' style="width:500; height:300;" mask='url(#mask2)' />
		<image id='my-use2' xlink:href='Amelia.jpg' style="width:500; height:300;" mask='url(#mask3)' />
		<image id='my-use3' xlink:href='Amelia.jpg' style="width:500; height:300;" mask='url(#mask4)' />
		<image id='my-use4' xlink:href='Amelia.jpg' style="width:500; height:300;" mask='url(#mask7)' />

		<filter>
			<feComposite>
				
			</feComposite>
		</filter>

		</defs>
		<!-- <image xlink:href='Amelia.jpg' style="width:500; height:300;" mask='url(#mask1)' /> -->

	</svg>
	<!-- <div class='flex'> -->
		
		<svg width=500 height=300 >
			<image ng-href='{{href}}' xlink:href=''  style="width:500; height:300;"/>	
			
		</svg>
		<svg width=500 height=300 >
			<image xlink:href='Amelia.jpg' style="width:500; height:300;" filter='url(#son-of-jake)'/>	
		</svg>
		<svg width=500 height=300 >
			<image xlink:href='Amelia.jpg' style="width:500; height:300;" filter='url(#son-of-jake-green)'/>	
		</svg>
		<svg width=500 height=300 >
			<image xlink:href='Amelia.jpg' style="width:500; height:300;" filter='url(#son-of-jake-blue)'/>	
		</svg>
		<!-- <svg width=500 height=300 >
			<image xlink:href='Amelia.jpg' style="width:500; height:300;" filter='url(#son-of-jake-inverted)'/>	
		</svg> -->
	
		<svg width=500 height=300 >
			<use xlink:href='#my-use'/>
		</svg>
	<!-- </div> -->
	<svg width=500 height=300 >
		<!-- <rect width=500 height=300 fill='' mask='url(#mask9)'/> -->
		<image  xlink:href='Amelia.jpg' style="width:500; height:300;" mask='url(#mask9)'/>	
		<!-- <image class='fade10' xlink:href='Amelia.jpg' style="width:500; height:300;" mask='url(#mask7)'/>	 -->
	</svg>
	<svg width=500 height=300 >
		<use xlink:href='#my-use2'/>
	</svg>
	<svg width=500 height=300 >
		<use xlink:href='#my-symbol'/>
	</svg>
	<svg width=500 height=300 >
		<use xlink:href='#my-use3' />
	</svg>
	<svg width=500 height=300 >
		<use xlink:href='#my-use4' />
	</svg>
	<svg width=500 height=300 >
		<image xlink:href='Amelia.jpg' style="width:500; height:300;" filter='url(#son-of-jake-inverted)'/>	
	</svg>
	<svg width=500 height=300 >
		<image xlink:href='Amelia.jpg' style="width:500; height:300;" filter='url(#son-of-jake)' mask='url(#mask5)'/>	
		<!-- <image xlink:href='Amelia.jpg' style="width:500; height:300;" filter='url(#son-of-jake-inverted)'/>	 -->
	</svg>
	<svg width=1000 height=500 >
		<image id='my-use3' xlink:href='Amelia.jpg' style="width:500; height:300;" mask='url(#mask4)' />
		<image id='hover' id='my-use4' xlink:href='Amelia.jpg' style="width:500; height:300;" mask='url(#mask7)' />	
		<!-- <image xlink:href='Amelia.jpg' style="width:500; height:300;" filter='url(#son-of-jake-inverted)'/>	 -->
	</svg>
	<svg width=1000 height=500 >
		<image id='my-use3' xlink:href='download.jpeg' style="width:500; height:300;" mask='url(#mask4)' />
		<image id='hover' id='my-use4' xlink:href='download.jpeg' style="width:500; height:300;" mask='url(#mask7)' />	
		<!-- <image xlink:href='Amelia.jpg' style="width:500; height:300;" filter='url(#son-of-jake-inverted)'/>	 -->
	</svg>	
	<svg width=1000 height=500 >
		<image id='my-use3' xlink:href='download.jpeg' style="width:500; height:300;" mask='url(#mask8)' />
		<image id='h1' id='my-use4' xlink:href='download.jpeg' style="width:500; height:300;" mask='url(#mask9)' />	
		<!-- <image xlink:href='Amelia.jpg' style="width:500; height:300;" filter='url(#son-of-jake-inverted)'/>	 -->
	</svg>
	<svg height=1000 width=1000 >
		<rect height=300 width=500 fill='url(#pattern)' />
		
	</svg>

	<svg width=500 height=300 >
		<rect width=500 height=300 fill='blue' mask='url(#mask8)'/>
	</svg>
	<svg width=500 height=300 >
		<!-- <rect width=500 height=300 fill='' mask='url(#mask9)'/> -->
		<image class='fade' xlink:href='Amelia.jpg' style="width:500; height:300;" mask='url(#mask4)'/>	
		<image class='fade10' xlink:href='Amelia.jpg' style="width:500; height:300;" mask='url(#mask7)'/>	
	</svg>
	
	<!-- <img src="https://media.giphy.com/media/e2tSgEk1k8Baw/giphy.gif"> -->
  </div>
	<script >
		angular.module('svgImageTest', [])
  .controller('SvgImageCtrl', function ($scope) {
    $scope.href = 'https://encrypted-tbn0.gstatic.com/images?q=tbn:ANd9GcSAy37Nu5guD8uAEGM6w52KJIZHV_WxJM5HznnWZt3-4emSuhOX6w';
  });
		
		var h1 = document.querySelector("#h1")

var options = {
iterations: Infinity,
iterationStart: 0,
delay: 500,
endDelay: 0,
direction: 'alternate',
duration: 3000,
fill: 'forwards',
easing: 'ease-out',
}

var keyframes = [
{ transform: 'translateX(500px) scaleY(2.5) scaleX(.2)', transformOrigin: '50% 0', filter: 'blur(40px)', opacity: 0 },
{ transform: 'translateX(0) scaleY(1) scaleX(1)',
transformOrigin: '50% 50%',
 filter: 'blur(0)',
 opacity: 1 }
]

h1.animate(keyframes, options)

	</script>
	
</body>
</html>