<!DOCTYPE html>
<html ng-app='filterApp' lang="en">
<head>
	<meta charset="UTF-8">
	<title>Document</title>
	    <script src="https://ajax.googleapis.com/ajax/libs/angularjs/1.5.6/angular.min.js"></script>
	    <script src="https://cdnjs.cloudflare.com/ajax/libs/gsap/1.20.3/TweenMax.min.js"></script>
	    <script src='morphsvg.js'></script>

	<style type="text/css">
.st0{fill:none; stroke:red}
  .st1{fill:none;stroke:#000000;stroke-width:4;stroke-miterlimit:10;}
  .st2{fill:#00FFFF;stroke:#000000;stroke-width:4;stroke-miterlimit:10;}
        
	.container {

  border: 10px solid #b6bdc3;
  width: 100%;
  background: #fff;
  margin: 0 auto;
}

/* Required to make image fluid in IE */

img:not(.png) {
  width: 100%;
}		

li {
	display: inline-block;
}

	</style>
</head>
<body>
	<svg>
		  <path id=circle class="st0" d="M50,94C25.7,94,6,74.3,6,50S25.7,6,50,6s44,19.7,44,44S74.3,94,50,94z"/>
	</svg>
	<svg viewBox='0 0 5 5'>
  <!-- <path  class="st1" d="M50,144C25.7,94,6,74.3,6,50S25.7,6,50,6s44,19.7,44,44S74.3,94,50,94z"/> -->
		 <path id="hippo" d="M2 1 h1 v1 h1 v1 h-1 v1 h-1 v-1 h-1 v-1 h1 z" />
	</svg>
	<nav>
		<ul>
			<li>
				<a href="">
				
					<svg id='icon' width=25 height=25 >
						
					<use xlink:href='#XMLID_1_'/>
					</svg>
					<span>span 1</span>
				</a>
			</li>
			<li id='time'>2</li>
			<li id='line'>3</li>
			<li>4</li>
			<li>5</li>
		</ul>
	</nav>

	<svg id='foo'   viewBox='0 0 600 600'   version="1.1" id="Layer_1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" 
	 >
	<!--  <style type="text/css">
	 	svg * {
            transition: stroke 1s ease-out;
        }

   @media all and (max-width: 600px) {
            #circ { 
                stroke: orange; 
            }
            
        }
#text {
	transform: rotate(5deg);
}

	 </style> -->
		<defs>
			
		<filter id='feImage'>
			 
			<feImage xlink:href='fe-image.jpg' result='fe' width='100' height='150 '></feImage>
			<feTile in='fe' result='tile'></feTile>
			<feComposite in='tile' in2='SourceGraphic' operator='xor'></feComposite>
			<!-- <feMerge>
				<feMergeNode in='tile'></feMergeNode>
				<feMergeNode in='SourceGraphic'></feMergeNode>
			</feMerge> -->
		</filter>
			<symbol id="XMLID_1_" viewBox='0 0 100 100'>
  <path id="XMLID_14_" class="st0" d="M50,94C25.7,94,6,74.3,6,50S25.7,6,50,6s44,19.7,44,44S74.3,94,50,94z"/>
  <path id="XMLID_13_" class="st1" d="M50,94C25.7,94,6,74.3,6,50S25.7,6,50,6s44,19.7,44,44S74.3,94,50,94z"/>
<polygon id="XMLID_2_" class="st2" points="50,8.2 62.3,33.1 89.7,37.1 69.9,56.5 74.5,83.8 50,70.9 25.5,83.8 30.1,56.5 10.3,37.1 
  37.7,33.1 "/>
</symbol>
		</defs>

		<circle id='circ'  r='200' cx='300' cy='300'  stroke='purple' stroke-width='10'></circle>
		<rect id='houses' x='270' y='270' fill='red' width='100' height='100 '></rect>
		<text id='text' x='250' y='250' fill='green' style="text-anchor: middle" stroke='yellow' font-size='200px' dominant-baseline='middle'>svg</text>
	</svg>

	<img src="angular.svg">
	<svg  viewBox='0 0 600 600'  >
		<defs>

			
		<filter id='feImage'>
			 
			<feImage xlink:href='fe-image.jpg' result='fe' width='100' height='150 '></feImage>
			<feTile in='fe' result='tile'></feTile>
			<feComposite in='tile' in2='SourceGraphic' operator='xor'></feComposite>

		</filter>
		</defs>

		<circle  r='290' cx=300 cy=300 filter='url(#feImage)'></circle>
	</svg>
<div class="container">
	
	<img src="fe-image.svg">
</div>

<div ng-controller="myController as $ctrl">
<button ng-click='$ctrl.update()'>click me</button>
	{{$ctrl.filter}}
	{{$ctrl.array}}
</div>
	<img src="fe-image.svg">
	
	<script type="text/javascript">

		var svg = document.querySelector("#foo");
		var icon = document.querySelector('#icon');
		var time = document.querySelector('#time');
		var line = document.querySelector('#line');
		var li = document.querySelectorAll('li')
		console.log(li)


		TweenMax.to("#circle", 1, {morphSVG:"#hippo"});

		tl = new TimelineMax();

		tl
		 .from(time, 2, {y:50})
		 .from(line, 2, {y:50})
		.staggerFrom(li , 2, {cycle :{

		x: [-200 ,200]}
		}, .2)



		TweenMax.to(icon, 2, {opacity: 0, repeat: -1, yoyo: true})
		// TweenMax.from(time, 2, {y:50})
		// TweenMax.from(line, 2, {x:50})

		TweenMax.to(
  svg, //Our SVG
  2, //The duration of the animation
  {
    attr:{//This is the AttrPlugin which updates any attribute on every new frame
      viewBox: "270 270 100 100" //We specify the end values of the animation
    },
    repeat: -1, //To repeat our animation endlessly
    yoyo: true, //The animation will go forwards then backwards
  }
);

angular.module('filterApp', [])
	.controller('myController', function(){
		var $ctrl = this;
		$ctrl.bar = 'blah';
		$ctrl.array = [1,2]
		$ctrl.filter = `<filter id='son-of-sam' color-interpolation-filters="sRGB">

				<feComponentTransfer>
					<feFuncR type='discrete' tableValues='1 1'/>
					<feFuncG type='discrete' tableValues='0 1'/>
					<feFuncB type='discrete' tableValues='0 0'/>
				</feComponentTransfer>	
          
                <feColorMatrix  type="hueRotate" values="180" />

				<feComponentTransfer>
					<feFuncR type='discrete' tableValues='1 0'/>
					<feFuncG type='discrete' tableValues='0 0'/>
					<feFuncB type='discrete' tableValues='0 0'/>
				</feComponentTransfer>

				<feColorMatrix type='matrix' 
					values='${$ctrl.array.join(' ')}'/>

			</filter>`;
			$ctrl.update = function(){
				$ctrl.array.push(0);
				console.log($ctrl.array)
			}

		
	})


var button = document.querySelector('button')
var arr = [];
var i = 0;
 function click(){

 	arr.push(1 + i);
 	i++;
 	console.log(`<filter id='son-of-sam' color-interpolation-filters="sRGB">

				<feComponentTransfer>
					<feFuncR type='discrete' tableValues='1 1'/>
					<feFuncG type='discrete' tableValues='0 1'/>
					<feFuncB type='discrete' tableValues='0 0'/>
				</feComponentTransfer>	
          
                <feColorMatrix  type="hueRotate" values="180" />

				<feComponentTransfer>
					<feFuncR type='discrete' tableValues='1 0'/>
					<feFuncG type='discrete' tableValues='0 0'/>
					<feFuncB type='discrete' tableValues='0 0'/>
				</feComponentTransfer>

				<feColorMatrix type='matrix' 
					values='${arr.join(' ')}'/>

			</filter> `)
			}
				

// button.addEventListener('click',click)
			var toggle = true;
		function toggleview(){

var houses = document.getElementById("houses");
var s = houses.getBBox();

//check the console for the SVGRect object
console.log( s );

//we store the values from the object as our new viewBox string
var newView = "" + s.x + " " + s.y + " " + s.width + " " +  s.height;
var newView = "" + 220 + " " + 220 + " " + 200 + " " +  200;
var oldView = '0 0 600 600'

//we then set the new viewBox string as the viewBox attribute on the SVG
var foo = document.getElementById("foo");
if(toggle){

foo.setAttribute("viewBox", newView);
toggle = false;
} else {
	foo.setAttribute('viewBox', oldView);
	toggle = true;
}
		}

		window.addEventListener('click', toggleview)

	</script>
	
</body>
</html>